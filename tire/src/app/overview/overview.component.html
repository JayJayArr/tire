<nb-card
  [nbSpinner]="loading"
  nbSpinnerMessage="Loading"
  nbSpinnerStatus="primary"
>
  <nb-card-header>
    <h3>Global Overview</h3>
    <nb-select
      placeholder="Select Card Number"
      [(selected)]="selectedCardno"
      class="cardno-select"
    >
      @for (cardno of availableCardnos; track cardno) {
        <nb-option value="{{ cardno }}">{{ cardno }}</nb-option>
      }
    </nb-select>
    <input
      nbInput
      [nbDatepicker]="rangepicker"
      placeholder="Pick Date Range"
      id="rangepicker"
      [(ngModel)]="dateRange"
    />
    <nb-rangepicker #rangepicker></nb-rangepicker>
    <button
      nbButton
      status="primary"
      class="refresh-button"
      (click)="refresh()"
    >
      Refresh<nb-icon icon="refresh-outline"></nb-icon>
    </button>
    <button
      nbButton
      status="primary"
      class="download-button"
      (click)="getFile()"
    >
      Download<nb-icon icon="download-outline"></nb-icon>
    </button>
    <button
      nbButton
      status="primary"
      class="create-button"
      (click)="opendialog()"
    >
      Create Entry for this Card<nb-icon icon="plus-outline"></nb-icon>
    </button>
  </nb-card-header>
  <nb-card-body>
    <app-timetable [data]="data" [allowEdit]="true"></app-timetable>
  </nb-card-body>
</nb-card>
<nb-layout></nb-layout>
